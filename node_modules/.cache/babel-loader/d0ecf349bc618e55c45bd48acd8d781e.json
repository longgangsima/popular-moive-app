{"ast":null,"code":"var _jsxFileName = \"/Users/qingyunwu/su-final-version/popular-moive-app/src/view/movie-tab/movie-tab.js\";\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport { loadNextPageFromDB } from \"../../redux/actions\";\nimport { addToFavorite } from \"../../redux/actions\";\nimport { removeFromFavorite } from \"../../redux/actions\";\nimport { addToBlock } from \"../../redux/actions\";\nimport MovieItem from \"../../components/movie-item/movie-item\";\nimport \"./movie-tab.css\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCaretSquareLeft } from '@fortawesome/free-solid-svg-icons';\nimport { faCaretSquareRight } from '@fortawesome/free-solid-svg-icons';\nimport { faCaretDown } from '@fortawesome/free-solid-svg-icons';\nimport loadingBar from \"../../img/loading.gif\";\n\nclass MovieTab extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      currentPage: 0,\n      totalPage: 0,\n      currentPageMovieList: [],\n      showLoadingBar: true\n    };\n\n    this.componentDidMount = () => {\n      const {\n        loadNextPageFromDB\n      } = this.props;\n      const {\n        currentPage\n      } = this.state;\n      loadNextPageFromDB(currentPage + 1);\n    };\n\n    this.handleButtonNextClick = () => {\n      const {\n        currentPage,\n        totalPage\n      } = this.state;\n      const nextPage = currentPage + 1;\n\n      if (nextPage <= totalPage) {\n        const {\n          movieList\n        } = this.props;\n        this.setState({\n          currentPage: nextPage,\n          currentPageMovieList: movieList[nextPage - 1].filter(movieItem => !movieItem.isBlock)\n        });\n      } else {\n        this.setState({\n          showLoadingBar: true\n        });\n        const {\n          loadNextPageFromDB\n        } = this.props;\n        loadNextPageFromDB(nextPage);\n      }\n    };\n\n    this.handleButtonPrevClick = () => {\n      const {\n        currentPage\n      } = this.state;\n      if (currentPage === 1) return;\n      const prevPage = currentPage - 1;\n      const {\n        movieList\n      } = this.props;\n      this.setState({\n        currentPage: prevPage,\n        currentPageMovieList: movieList[prevPage - 1].filter(movieItem => !movieItem.isBlock)\n      });\n    };\n\n    this.handleButtonReleaseDateClick = () => {\n      let arr = [...this.state.currentPageMovieList];\n      arr.sort(this.sortReleaseDate);\n      this.setState({\n        currentPageMovieList: arr\n      });\n    };\n\n    this.sortReleaseDate = (a, b) => {\n      return Date.parse(b.release_date) - Date.parse(a.release_date);\n    };\n\n    this.handleButtonPopularityClick = () => {\n      let arr = [...this.state.currentPageMovieList];\n      arr.sort(this.sortPopularity);\n      this.setState({\n        currentPageMovieList: arr\n      });\n    };\n\n    this.sortPopularity = (a, b) => b.popularity - a.popularity;\n\n    this.handleButtonAverageScoreClick = () => {\n      let arr = [...this.state.currentPageMovieList];\n      arr.sort(this.sortAverageScore);\n      this.setState({\n        currentPageMovieList: arr\n      });\n    };\n\n    this.sortAverageScore = (a, b) => b.vote_average - a.vote_average;\n\n    this.handleButtonVoteCountClick = () => {\n      let arr = [...this.state.currentPageMovieList];\n      arr.sort(this.sortVoteCount);\n      this.setState({\n        currentPageMovieList: arr\n      });\n    };\n\n    this.sortVoteCount = (a, b) => b.vote_count - a.vote_count;\n\n    this.removeMovieItemFromState = id => {\n      this.setState({\n        currentPageMovieList: this.state.currentPageMovieList.filter(movieItem => movieItem.id !== id)\n      });\n    };\n  }\n\n  render() {\n    const {\n      addToFavorite,\n      removeFromFavorite,\n      addToBlock\n    } = this.props;\n    const {\n      currentPageMovieList,\n      currentPage,\n      showLoadingBar\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"nav-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }\n    }, \"The Top Rated Movie List\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"middle-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      onClick: this.handleButtonPrevClick,\n      className: \"icon-arrow\",\n      icon: faCaretSquareLeft,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"middle-bar-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, \"Page \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 64\n      }\n    }, currentPage), \"/500 of 10000 Results\"), /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      onClick: this.handleButtonNextClick,\n      className: \"icon-arrow\",\n      icon: faCaretSquareRight,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"nav-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"nav-button-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleButtonReleaseDateClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 29\n      }\n    }, \"Release Date\", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"icon-sort\",\n      icon: faCaretDown,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleButtonPopularityClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 29\n      }\n    }, \"Popularity\", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"icon-sort\",\n      icon: faCaretDown,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"nav-button-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleButtonAverageScoreClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 29\n      }\n    }, \"Average Score\", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"icon-sort\",\n      icon: faCaretDown,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.handleButtonVoteCountClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 29\n      }\n    }, \"Vote Count\", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      className: \"icon-sort\",\n      icon: faCaretDown,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 33\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: showLoadingBar ? \"\" : \"hideElement\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loading-bar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: loadingBar,\n      alt: \"wrong url\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: showLoadingBar ? \"hideElement\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"movie-list-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"movie-list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, currentPageMovieList && currentPageMovieList.map(movieItem => /*#__PURE__*/React.createElement(MovieItem, {\n      key: movieItem.id,\n      movieItem: movieItem,\n      removeMovieItemFromState: this.removeMovieItemFromState,\n      addToFavorite: addToFavorite,\n      removeFromFavorite: removeFromFavorite,\n      addToBlock: addToBlock,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 29\n      }\n    }))))));\n  }\n\n}\n\nMovieTab.propTypes = {\n  movieList: PropTypes.array.isRequired,\n  loadNextPageFromDB: PropTypes.func.isRequired,\n  addToFavorite: PropTypes.func.isRequired,\n  removeFromFavorite: PropTypes.func.isRequired,\n  addToBlock: PropTypes.func.isRequired\n};\n\nMovieTab.getDerivedStateFromProps = (props, state) => {\n  const length = props.movieList.length;\n  if (length === state.totalPage) return null; // {\n  //     return  {\n  //         currentPageMovieList: props.movieList[state.currentPage - 1] && \n  //         props.movieList[state.currentPage - 1].filter((movieItem) => !movieItem.isBlock),\n  //     }\n  // }\n\n  return {\n    currentPage: state.currentPage + 1,\n    totalPage: state.totalPage + 1,\n    currentPageMovieList: props.movieList[length - 1],\n    showLoadingBar: false\n  };\n};\n\nexport default connect(state => ({\n  movieList: state.movieListReducer\n}), {\n  loadNextPageFromDB,\n  addToFavorite,\n  removeFromFavorite,\n  addToBlock\n})(MovieTab);","map":{"version":3,"sources":["/Users/qingyunwu/su-final-version/popular-moive-app/src/view/movie-tab/movie-tab.js"],"names":["React","connect","PropTypes","loadNextPageFromDB","addToFavorite","removeFromFavorite","addToBlock","MovieItem","FontAwesomeIcon","faCaretSquareLeft","faCaretSquareRight","faCaretDown","loadingBar","MovieTab","Component","state","currentPage","totalPage","currentPageMovieList","showLoadingBar","componentDidMount","props","handleButtonNextClick","nextPage","movieList","setState","filter","movieItem","isBlock","handleButtonPrevClick","prevPage","handleButtonReleaseDateClick","arr","sort","sortReleaseDate","a","b","Date","parse","release_date","handleButtonPopularityClick","sortPopularity","popularity","handleButtonAverageScoreClick","sortAverageScore","vote_average","handleButtonVoteCountClick","sortVoteCount","vote_count","removeMovieItemFromState","id","render","map","propTypes","array","isRequired","func","getDerivedStateFromProps","length","movieListReducer"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\nimport {loadNextPageFromDB} from \"../../redux/actions\";\nimport {addToFavorite} from \"../../redux/actions\";\nimport {removeFromFavorite} from \"../../redux/actions\";\nimport {addToBlock} from \"../../redux/actions\";\nimport MovieItem from \"../../components/movie-item/movie-item\";\nimport \"./movie-tab.css\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCaretSquareLeft } from '@fortawesome/free-solid-svg-icons';\nimport { faCaretSquareRight } from '@fortawesome/free-solid-svg-icons';\nimport { faCaretDown } from '@fortawesome/free-solid-svg-icons';\nimport loadingBar from \"../../img/loading.gif\";\n\nclass MovieTab extends React.Component {\n\n    static propTypes = {\n        movieList: PropTypes.array.isRequired,\n        loadNextPageFromDB: PropTypes.func.isRequired,\n        addToFavorite: PropTypes.func.isRequired,\n        removeFromFavorite: PropTypes.func.isRequired,\n        addToBlock: PropTypes.func.isRequired,\n    }\n\n    state = {\n        currentPage: 0,\n        totalPage: 0,\n        currentPageMovieList: [],\n        showLoadingBar: true,\n    }\n\n    static getDerivedStateFromProps = (props, state) => {\n        const length = props.movieList.length;\n        if(length === state.totalPage) return null;\n        // {\n        //     return  {\n        //         currentPageMovieList: props.movieList[state.currentPage - 1] && \n        //         props.movieList[state.currentPage - 1].filter((movieItem) => !movieItem.isBlock),\n        //     }\n        // }\n        return {\n            currentPage: state.currentPage + 1,\n            totalPage: state.totalPage + 1,\n            currentPageMovieList: props.movieList[length - 1],\n            showLoadingBar: false,\n        }\n    }\n\n    componentDidMount = () => {\n        const {loadNextPageFromDB} = this.props;\n        const {currentPage} = this.state;\n        loadNextPageFromDB(currentPage + 1);\n    }\n\n    handleButtonNextClick = () => {\n        const {currentPage, totalPage} = this.state;\n        const nextPage = currentPage + 1;\n        if(nextPage <= totalPage) {\n            const {movieList} = this.props;\n            this.setState({\n                currentPage: nextPage,\n                currentPageMovieList: movieList[nextPage - 1].filter((movieItem) => !movieItem.isBlock),\n            })\n        }\n        else {\n            this.setState({\n                showLoadingBar: true,\n            })\n            const {loadNextPageFromDB} = this.props;\n            loadNextPageFromDB(nextPage);\n        }\n    }\n\n    handleButtonPrevClick = () => {\n        const {currentPage} = this.state;\n        if(currentPage === 1) return;\n        const prevPage = currentPage - 1;\n        const {movieList} = this.props;\n        this.setState({\n            currentPage: prevPage,\n            currentPageMovieList: movieList[prevPage - 1].filter((movieItem) => !movieItem.isBlock),\n        });\n    }\n\n    handleButtonReleaseDateClick = () => {\n        let arr = [...this.state.currentPageMovieList];\n        arr.sort(this.sortReleaseDate);\n        this.setState({\n            currentPageMovieList: arr,\n        });\n    }\n\n    sortReleaseDate = (a, b) => {\n        return Date.parse(b.release_date) - Date.parse(a.release_date);\n    }\n\n    handleButtonPopularityClick = () => {\n        let arr = [...this.state.currentPageMovieList];\n        arr.sort(this.sortPopularity);\n        this.setState({\n            currentPageMovieList: arr,\n        });\n    }\n\n    sortPopularity = (a, b) => (b.popularity - a.popularity);\n    \n    handleButtonAverageScoreClick = () => {\n        let arr = [...this.state.currentPageMovieList];\n        arr.sort(this.sortAverageScore);\n        this.setState({\n            currentPageMovieList: arr,\n        });\n    }\n\n    sortAverageScore = (a, b) => (b.vote_average - a.vote_average);\n\n    handleButtonVoteCountClick = () => {\n        let arr = [...this.state.currentPageMovieList];\n        arr.sort(this.sortVoteCount);\n        this.setState({\n            currentPageMovieList: arr,\n        });\n    }\n\n    sortVoteCount = (a, b) => (b.vote_count - a.vote_count);\n\n    removeMovieItemFromState = (id) => {\n        this.setState({\n            currentPageMovieList: this.state.currentPageMovieList.filter((movieItem) => movieItem.id !== id),\n        });\n    }\n\n    render() {\n        const {addToFavorite, removeFromFavorite, addToBlock} = this.props;\n        const {currentPageMovieList, currentPage, showLoadingBar} = this.state;\n        return (\n            <div className=\"page\">\n                <div className=\"nav-bar\">\n                    <h1>The Top Rated Movie List</h1>\n                    <div className=\"middle-bar\">\n                        <FontAwesomeIcon onClick={this.handleButtonPrevClick} className=\"icon-arrow\" icon={faCaretSquareLeft} />\n                        <div className=\"middle-bar-title\">Page <span>{currentPage}</span>/500 of 10000 Results</div>\n                        <FontAwesomeIcon onClick={this.handleButtonNextClick} className=\"icon-arrow\" icon={faCaretSquareRight} />\n                    </div>\n                    <div className=\"nav-button\">\n                        <div className=\"nav-button-wrapper\">\n                            <button onClick={this.handleButtonReleaseDateClick}>\n                                Release Date\n                                <FontAwesomeIcon className=\"icon-sort\" icon={faCaretDown} />\n                            </button>\n                            <button onClick={this.handleButtonPopularityClick}>\n                                Popularity\n                                <FontAwesomeIcon className=\"icon-sort\" icon={faCaretDown} />\n                            </button>\n                        </div>\n                        <div className=\"nav-button-wrapper\">\n                            <button onClick={this.handleButtonAverageScoreClick}>\n                                Average Score\n                                <FontAwesomeIcon className=\"icon-sort\" icon={faCaretDown} />\n                            </button>\n                            <button onClick={this.handleButtonVoteCountClick}>\n                                Vote Count\n                                <FontAwesomeIcon className=\"icon-sort\" icon={faCaretDown} />\n                            </button>\n                        </div>\n                    </div>\n                </div>\n\n                <div className={showLoadingBar?\"\":\"hideElement\"}>\n                    <div className=\"loading-bar\">\n                        <img src={loadingBar} alt=\"wrong url\" />\n                    </div>\n                </div>\n                \n                <div className={showLoadingBar?\"hideElement\":\"\"}>\n                    <div className=\"movie-list-wrapper\">\n                        <ul className=\"movie-list\">\n                            {currentPageMovieList && currentPageMovieList.map((movieItem) => \n                            <MovieItem key={movieItem.id} movieItem={movieItem} removeMovieItemFromState={this.removeMovieItemFromState}\n                            addToFavorite={addToFavorite} removeFromFavorite={removeFromFavorite} addToBlock={addToBlock} />)}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    state => ({movieList: state.movieListReducer}), \n    {loadNextPageFromDB, addToFavorite, removeFromFavorite, addToBlock}\n)(MovieTab);\n"]},"metadata":{},"sourceType":"module"}