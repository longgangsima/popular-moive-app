{"ast":null,"code":"// for action creator\nimport { LOAD_NEXT_PAGE_FROM_DB, ADD_TO_FAVORITE, REMOVE_FROM_FAVORITE, ADD_TO_BLOCK, REMOVE_FROM_BLOCK, URL_DISCOVER_PREFIX, API_KEY_SUGUO } from \"../constants\";\nimport axios from \"axios\";\n\nconst loadNextPageFromDBSynch = singlePageMovieList => ({\n  type: LOAD_NEXT_PAGE_FROM_DB,\n  data: singlePageMovieList\n});\n\nexport const loadNextPageFromDB = page => {\n  return dispatch => {\n    // send ajax to movieDB\n    const url = URL_DISCOVER_PREFIX + \"/discover/movie?api_key=\" + API_KEY_SUGUO + \"&sort_by=popularity.desc&&include_adult=false&include_video=false&page=\" + page;\n    axios.get(url).then(function (response) {\n      const nextPageMovieList = response.data.results; // console.log(\"response\", nextPageMovieList);\n\n      for (let movieItem of nextPageMovieList) {\n        movieItem.isFavorite = false;\n        movieItem.isBlock = false;\n      }\n\n      dispatch(loadNextPageFromDBSynch(nextPageMovieList));\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport const addToFavorite = movieItem => ({\n  type: ADD_TO_FAVORITE,\n  data: movieItem\n});\nexport const removeFromFavorite = movieId => ({\n  type: REMOVE_FROM_FAVORITE,\n  data: movieId\n});\nexport const addToBlock = movieItem => ({\n  type: ADD_TO_BLOCK,\n  data: movieItem\n});\nexport const removeFromBlock = movieId => ({\n  type: REMOVE_FROM_BLOCK,\n  data: movieId\n});","map":{"version":3,"sources":["/Users/qingyunwu/su_movielist/popular-moive-app/src/redux/actions.js"],"names":["LOAD_NEXT_PAGE_FROM_DB","ADD_TO_FAVORITE","REMOVE_FROM_FAVORITE","ADD_TO_BLOCK","REMOVE_FROM_BLOCK","URL_DISCOVER_PREFIX","API_KEY_SUGUO","axios","loadNextPageFromDBSynch","singlePageMovieList","type","data","loadNextPageFromDB","page","dispatch","url","get","then","response","nextPageMovieList","results","movieItem","isFavorite","isBlock","catch","error","console","log","addToFavorite","removeFromFavorite","movieId","addToBlock","removeFromBlock"],"mappings":"AAAA;AACA,SAAQA,sBAAR,EAAgCC,eAAhC,EAAiDC,oBAAjD,EAAuEC,YAAvE,EAAqFC,iBAArF,EACIC,mBADJ,EACyBC,aADzB,QAC6C,cAD7C;AAEA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,uBAAuB,GAAIC,mBAAD,KAA0B;AACtDC,EAAAA,IAAI,EAAEV,sBADgD;AAEtDW,EAAAA,IAAI,EAAEF;AAFgD,CAA1B,CAAhC;;AAKA,OAAO,MAAMG,kBAAkB,GAAIC,IAAD,IAAU;AACxC,SAAQC,QAAD,IAAc;AACjB;AACA,UAAMC,GAAG,GAAGV,mBAAmB,GAAG,0BAAtB,GAAmDC,aAAnD,GACV,yEADU,GACkEO,IAD9E;AAEAN,IAAAA,KAAK,CAACS,GAAN,CAAUD,GAAV,EACCE,IADD,CACM,UAAUC,QAAV,EAAoB;AACtB,YAAMC,iBAAiB,GAAGD,QAAQ,CAACP,IAAT,CAAcS,OAAxC,CADsB,CAEtB;;AACA,WAAI,IAAIC,SAAR,IAAqBF,iBAArB,EAAwC;AACpCE,QAAAA,SAAS,CAACC,UAAV,GAAuB,KAAvB;AACAD,QAAAA,SAAS,CAACE,OAAV,GAAoB,KAApB;AACH;;AACDT,MAAAA,QAAQ,CAACN,uBAAuB,CAACW,iBAAD,CAAxB,CAAR;AACH,KATD,EAUCK,KAVD,CAUO,UAAUC,KAAV,EAAiB;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAZD;AAaH,GAjBD;AAkBH,CAnBM;AAqBP,OAAO,MAAMG,aAAa,GAAIP,SAAD,KAAgB;AACzCX,EAAAA,IAAI,EAAET,eADmC;AAEzCU,EAAAA,IAAI,EAAEU;AAFmC,CAAhB,CAAtB;AAKP,OAAO,MAAMQ,kBAAkB,GAAIC,OAAD,KAAc;AAC5CpB,EAAAA,IAAI,EAAER,oBADsC;AAE5CS,EAAAA,IAAI,EAAEmB;AAFsC,CAAd,CAA3B;AAKP,OAAO,MAAMC,UAAU,GAAIV,SAAD,KAAgB;AACtCX,EAAAA,IAAI,EAAEP,YADgC;AAEtCQ,EAAAA,IAAI,EAAEU;AAFgC,CAAhB,CAAnB;AAKP,OAAO,MAAMW,eAAe,GAAIF,OAAD,KAAc;AACzCpB,EAAAA,IAAI,EAAEN,iBADmC;AAEzCO,EAAAA,IAAI,EAAEmB;AAFmC,CAAd,CAAxB","sourcesContent":["// for action creator\nimport {LOAD_NEXT_PAGE_FROM_DB, ADD_TO_FAVORITE, REMOVE_FROM_FAVORITE, ADD_TO_BLOCK, REMOVE_FROM_BLOCK,\n    URL_DISCOVER_PREFIX, API_KEY_SUGUO} from \"../constants\";\nimport axios from \"axios\";\n\nconst loadNextPageFromDBSynch = (singlePageMovieList) => ({\n    type: LOAD_NEXT_PAGE_FROM_DB,\n    data: singlePageMovieList,\n});\n\nexport const loadNextPageFromDB = (page) => {\n    return (dispatch) => {\n        // send ajax to movieDB\n        const url = URL_DISCOVER_PREFIX + \"/discover/movie?api_key=\" + API_KEY_SUGUO \n        + \"&sort_by=popularity.desc&&include_adult=false&include_video=false&page=\" + page;\n        axios.get(url)\n        .then(function (response) {\n            const nextPageMovieList = response.data.results;\n            // console.log(\"response\", nextPageMovieList);\n            for(let movieItem of nextPageMovieList) {\n                movieItem.isFavorite = false;\n                movieItem.isBlock = false;\n            }\n            dispatch(loadNextPageFromDBSynch(nextPageMovieList));\n        })\n        .catch(function (error) {\n            console.log(error);\n        });\n    }\n}\n\nexport const addToFavorite = (movieItem) => ({\n    type: ADD_TO_FAVORITE,\n    data: movieItem,\n});\n\nexport const removeFromFavorite = (movieId) => ({\n    type: REMOVE_FROM_FAVORITE,\n    data: movieId,\n});\n\nexport const addToBlock = (movieItem) => ({\n    type: ADD_TO_BLOCK,\n    data: movieItem, \n});\n\nexport const removeFromBlock = (movieId) => ({\n    type: REMOVE_FROM_BLOCK,\n    data: movieId,\n});\n\n\n"]},"metadata":{},"sourceType":"module"}