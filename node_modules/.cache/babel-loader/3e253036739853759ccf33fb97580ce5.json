{"ast":null,"code":"// for action creator\nimport { LOAD_NEXT_PAGE_FROM_DB, ADD_TO_FAVORITE, REMOVE_FROM_FAVORITE, ADD_TO_BLOCK, REMOVE_FROM_BLOCK, URL_DISCOVER_PREFIX, API_KEY_SUGUO, ADD_CURRENT_PAGE, DEDUCT_CURRENT_PAGE } from \"../constants\";\nimport axios from \"axios\";\nexport const addCurrentPage = () => ({\n  type: ADD_CURRENT_PAGE\n});\nexport const deductCurrentPage = () => ({\n  type: DEDUCT_CURRENT_PAGE\n});\n\nconst loadNextPageFromDBSynch = singlePageMovieList => ({\n  type: LOAD_NEXT_PAGE_FROM_DB,\n  data: singlePageMovieList\n});\n\nexport const loadNextPageFromDB = page => {\n  return dispatch => {\n    // send ajax to movieDB\n    const url = URL_DISCOVER_PREFIX + \"/discover/movie?api_key=\" + API_KEY_SUGUO + \"&sort_by=popularity.desc&&include_adult=false&include_video=false&page=\" + page;\n    axios.get(url).then(function (response) {\n      const nextPageMovieList = response.data.results; // console.log(\"response\", response.data);\n\n      for (let i = 0; i < nextPageMovieList.length; i++) {\n        nextPageMovieList[i].isFavorite = false;\n        nextPageMovieList[i].isBlock = false;\n        nextPageMovieList[i].page = page;\n        nextPageMovieList[i].index = i;\n      }\n\n      dispatch(loadNextPageFromDBSynch(nextPageMovieList));\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n};\nexport const addToFavorite = (page, index) => ({\n  type: ADD_TO_FAVORITE,\n  data: {\n    page: page,\n    index: index\n  }\n});\nexport const removeFromFavorite = (page, index) => ({\n  type: REMOVE_FROM_FAVORITE,\n  data: {\n    page: page,\n    index: index\n  }\n});\nexport const addToBlock = (page, index) => ({\n  type: ADD_TO_BLOCK,\n  data: {\n    page: page,\n    index: index\n  }\n});\nexport const removeFromBlock = (page, index) => ({\n  type: REMOVE_FROM_BLOCK,\n  data: {\n    page: page,\n    index: index\n  }\n});","map":{"version":3,"sources":["/Users/suguo/Desktop/suguo_hw4/popular-moive-app/src/redux/actions.js"],"names":["LOAD_NEXT_PAGE_FROM_DB","ADD_TO_FAVORITE","REMOVE_FROM_FAVORITE","ADD_TO_BLOCK","REMOVE_FROM_BLOCK","URL_DISCOVER_PREFIX","API_KEY_SUGUO","ADD_CURRENT_PAGE","DEDUCT_CURRENT_PAGE","axios","addCurrentPage","type","deductCurrentPage","loadNextPageFromDBSynch","singlePageMovieList","data","loadNextPageFromDB","page","dispatch","url","get","then","response","nextPageMovieList","results","i","length","isFavorite","isBlock","index","catch","error","console","log","addToFavorite","removeFromFavorite","addToBlock","removeFromBlock"],"mappings":"AAAA;AACA,SAAQA,sBAAR,EAAgCC,eAAhC,EAAiDC,oBAAjD,EAAuEC,YAAvE,EAAqFC,iBAArF,EACIC,mBADJ,EACyBC,aADzB,EACwCC,gBADxC,EAC0DC,mBAD1D,QACoF,cADpF;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,cAAc,GAAG,OAAO;AACjCC,EAAAA,IAAI,EAAEJ;AAD2B,CAAP,CAAvB;AAIP,OAAO,MAAMK,iBAAiB,GAAG,OAAO;AACpCD,EAAAA,IAAI,EAAEH;AAD8B,CAAP,CAA1B;;AAIP,MAAMK,uBAAuB,GAAIC,mBAAD,KAA0B;AACtDH,EAAAA,IAAI,EAAEX,sBADgD;AAEtDe,EAAAA,IAAI,EAAED;AAFgD,CAA1B,CAAhC;;AAKA,OAAO,MAAME,kBAAkB,GAAIC,IAAD,IAAU;AACxC,SAAQC,QAAD,IAAc;AACjB;AACA,UAAMC,GAAG,GAAGd,mBAAmB,GAAG,0BAAtB,GAAmDC,aAAnD,GACV,yEADU,GACkEW,IAD9E;AAEAR,IAAAA,KAAK,CAACW,GAAN,CAAUD,GAAV,EACCE,IADD,CACM,UAAUC,QAAV,EAAoB;AACtB,YAAMC,iBAAiB,GAAGD,QAAQ,CAACP,IAAT,CAAcS,OAAxC,CADsB,CAEtB;;AACA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAgBA,CAAC,GAAGF,iBAAiB,CAACG,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AAC/CF,QAAAA,iBAAiB,CAACE,CAAD,CAAjB,CAAqBE,UAArB,GAAkC,KAAlC;AACAJ,QAAAA,iBAAiB,CAACE,CAAD,CAAjB,CAAqBG,OAArB,GAA+B,KAA/B;AACAL,QAAAA,iBAAiB,CAACE,CAAD,CAAjB,CAAqBR,IAArB,GAA4BA,IAA5B;AACAM,QAAAA,iBAAiB,CAACE,CAAD,CAAjB,CAAqBI,KAArB,GAA6BJ,CAA7B;AACH;;AACDP,MAAAA,QAAQ,CAACL,uBAAuB,CAACU,iBAAD,CAAxB,CAAR;AACH,KAXD,EAYCO,KAZD,CAYO,UAAUC,KAAV,EAAiB;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KAdD;AAeH,GAnBD;AAoBH,CArBM;AAuBP,OAAO,MAAMG,aAAa,GAAG,CAACjB,IAAD,EAAOY,KAAP,MAAkB;AAC3ClB,EAAAA,IAAI,EAAEV,eADqC;AAE3Cc,EAAAA,IAAI,EAAE;AAACE,IAAAA,IAAI,EAACA,IAAN;AAAYY,IAAAA,KAAK,EAACA;AAAlB;AAFqC,CAAlB,CAAtB;AAKP,OAAO,MAAMM,kBAAkB,GAAG,CAAClB,IAAD,EAAOY,KAAP,MAAkB;AAChDlB,EAAAA,IAAI,EAAET,oBAD0C;AAEhDa,EAAAA,IAAI,EAAE;AAACE,IAAAA,IAAI,EAACA,IAAN;AAAYY,IAAAA,KAAK,EAACA;AAAlB;AAF0C,CAAlB,CAA3B;AAKP,OAAO,MAAMO,UAAU,GAAG,CAACnB,IAAD,EAAOY,KAAP,MAAkB;AACxClB,EAAAA,IAAI,EAAER,YADkC;AAExCY,EAAAA,IAAI,EAAE;AAACE,IAAAA,IAAI,EAACA,IAAN;AAAYY,IAAAA,KAAK,EAACA;AAAlB;AAFkC,CAAlB,CAAnB;AAKP,OAAO,MAAMQ,eAAe,GAAG,CAACpB,IAAD,EAAOY,KAAP,MAAkB;AAC7ClB,EAAAA,IAAI,EAAEP,iBADuC;AAE7CW,EAAAA,IAAI,EAAE;AAACE,IAAAA,IAAI,EAACA,IAAN;AAAYY,IAAAA,KAAK,EAACA;AAAlB;AAFuC,CAAlB,CAAxB","sourcesContent":["// for action creator\nimport {LOAD_NEXT_PAGE_FROM_DB, ADD_TO_FAVORITE, REMOVE_FROM_FAVORITE, ADD_TO_BLOCK, REMOVE_FROM_BLOCK,\n    URL_DISCOVER_PREFIX, API_KEY_SUGUO, ADD_CURRENT_PAGE, DEDUCT_CURRENT_PAGE} from \"../constants\";\nimport axios from \"axios\";\n\nexport const addCurrentPage = () => ({\n    type: ADD_CURRENT_PAGE,\n});\n\nexport const deductCurrentPage = () => ({\n    type: DEDUCT_CURRENT_PAGE,\n});\n\nconst loadNextPageFromDBSynch = (singlePageMovieList) => ({\n    type: LOAD_NEXT_PAGE_FROM_DB,\n    data: singlePageMovieList,\n});\n\nexport const loadNextPageFromDB = (page) => {\n    return (dispatch) => {\n        // send ajax to movieDB\n        const url = URL_DISCOVER_PREFIX + \"/discover/movie?api_key=\" + API_KEY_SUGUO \n        + \"&sort_by=popularity.desc&&include_adult=false&include_video=false&page=\" + page;\n        axios.get(url)\n        .then(function (response) {\n            const nextPageMovieList = response.data.results;\n            // console.log(\"response\", response.data);\n            for(let i = 0 ; i < nextPageMovieList.length; i++) {\n                nextPageMovieList[i].isFavorite = false;\n                nextPageMovieList[i].isBlock = false;\n                nextPageMovieList[i].page = page;\n                nextPageMovieList[i].index = i;\n            }\n            dispatch(loadNextPageFromDBSynch(nextPageMovieList));\n        })\n        .catch(function (error) {\n            console.log(error);\n        });\n    }\n}\n\nexport const addToFavorite = (page, index) => ({\n    type: ADD_TO_FAVORITE,\n    data: {page:page, index:index},\n});\n\nexport const removeFromFavorite = (page, index) => ({\n    type: REMOVE_FROM_FAVORITE,\n    data: {page:page, index:index},\n});\n\nexport const addToBlock = (page, index) => ({\n    type: ADD_TO_BLOCK,\n    data: {page:page, index:index},\n});\n\nexport const removeFromBlock = (page, index) => ({\n    type: REMOVE_FROM_BLOCK,\n    data: {page:page, index:index},\n});\n"]},"metadata":{},"sourceType":"module"}